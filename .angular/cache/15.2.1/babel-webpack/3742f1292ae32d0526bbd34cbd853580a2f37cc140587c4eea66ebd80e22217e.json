{"ast":null,"code":"import { HttpEventType } from '@angular/common/http';\nimport { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class UploadComponent {\n  constructor(http) {\n    this.http = http;\n    this.onUploadFinished = new EventEmitter();\n    this.uploadFile = files => {\n      if (files.length === 0) {\n        return;\n      }\n      let fileToUpload = files[0];\n      const formData = new FormData();\n      formData.append('file', fileToUpload, fileToUpload.name);\n      this.http.post('https://localhost:5001/api/upload', formData, {\n        reportProgress: true,\n        observe: 'events'\n      }).subscribe({\n        next: event => {\n          if (event.type === HttpEventType.UploadProgress) this.progress = Math.round(100 * event.loaded / event.total);else if (event.type === HttpEventType.Response) {\n            this.message = 'Upload success.';\n            this.onUploadFinished.emit(event.body);\n          }\n        },\n        error: err => console.log(err)\n      });\n    };\n  }\n  ngOnInit() {}\n}\nUploadComponent.ɵfac = function UploadComponent_Factory(t) {\n  return new (t || UploadComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nUploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UploadComponent,\n  selectors: [[\"app-upload\"]],\n  outputs: {\n    onUploadFinished: \"onUploadFinished\"\n  },\n  decls: 2,\n  vars: 0,\n  template: function UploadComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"upload works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\t\\\"use strict\\\";\\n \\t\\n \\t\\n })()[_ngcontent-%COMP%]\\n;\"]\n});","map":{"version":3,"mappings":"AAAA,SAAqBA,aAAa,QAA2B,sBAAsB;AACnF,SAAoBC,YAAY,QAAwB,eAAe;;;AAOvE,OAAM,MAAOC,eAAe;EAK1BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAFP,qBAAgB,GAAG,IAAIH,YAAY,EAAE;IAOtD,eAAU,GAAII,KAAK,IAAI;MACrB,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;QACtB;;MAGF,IAAIC,YAAY,GAASF,KAAK,CAAC,CAAC,CAAC;MACjC,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,EAAE;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,YAAY,EAAEA,YAAY,CAACI,IAAI,CAAC;MAExD,IAAI,CAACP,IAAI,CAACQ,IAAI,CAAC,mCAAmC,EAAEJ,QAAQ,EAAE;QAACK,cAAc,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAQ,CAAC,CAAC,CACrGC,SAAS,CAAC;QACTC,IAAI,EAAGC,KAAK,IAAI;UAChB,IAAIA,KAAK,CAACC,IAAI,KAAKlB,aAAa,CAACmB,cAAc,EAC7C,IAAI,CAACC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAAC,GAAG,GAAGL,KAAK,CAACM,MAAM,GAAGN,KAAK,CAACO,KAAK,CAAC,CAAC,KAC1D,IAAIP,KAAK,CAACC,IAAI,KAAKlB,aAAa,CAACyB,QAAQ,EAAE;YAC9C,IAAI,CAACC,OAAO,GAAG,iBAAiB;YAChC,IAAI,CAACC,gBAAgB,CAACC,IAAI,CAACX,KAAK,CAACY,IAAI,CAAC;;QAE1C,CAAC;QACDC,KAAK,EAAGC,GAAsB,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG;OACnD,CAAC;IACJ,CAAC;EA1BuC;EAExCG,QAAQ,IACR;;AARWhC,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAAiC;EAAAC;IAAAT;EAAA;EAAAU;EAAAC;EAAAC;IAAA;MCR5BC,yBAAG;MAAAA,6BAAa;MAAAA,iBAAI","names":["HttpEventType","EventEmitter","UploadComponent","constructor","http","files","length","fileToUpload","formData","FormData","append","name","post","reportProgress","observe","subscribe","next","event","type","UploadProgress","progress","Math","round","loaded","total","Response","message","onUploadFinished","emit","body","error","err","console","log","ngOnInit","selectors","outputs","decls","vars","template","i0"],"sourceRoot":"","sources":["D:\\New folder\\IndiawishFrontend\\src\\app\\components\\upload\\upload.component.ts","D:\\New folder\\IndiawishFrontend\\src\\app\\components\\upload\\upload.component.html"],"sourcesContent":["import { HttpClient, HttpEventType, HttpErrorResponse } from '@angular/common/http';\nimport { Component, EventEmitter, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-upload',\n  templateUrl: './upload.component.html',\n  styleUrls: ['./upload.component.css']\n})\nexport class UploadComponent implements OnInit {\n  progress: number;\n  message: string;\n  @Output() public onUploadFinished = new EventEmitter();\n  \n  constructor(private http: HttpClient) { }\n\n  ngOnInit() {\n  }\n\n  uploadFile = (files) => {\n    if (files.length === 0) {\n      return;\n    }\n\n    let fileToUpload = <File>files[0];\n    const formData = new FormData();\n    formData.append('file', fileToUpload, fileToUpload.name);\n    \n    this.http.post('https://localhost:5001/api/upload', formData, {reportProgress: true, observe: 'events'})\n      .subscribe({\n        next: (event) => {\n        if (event.type === HttpEventType.UploadProgress)\n          this.progress = Math.round(100 * event.loaded / event.total);\n        else if (event.type === HttpEventType.Response) {\n          this.message = 'Upload success.';\n          this.onUploadFinished.emit(event.body);\n        }\n      },\n      error: (err: HttpErrorResponse) => console.log(err)\n    });\n  }\n}\n","<p>upload works!</p>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}